trigger ClosedOpportunityTrigger on Opportunity (after insert, after update) {
    
    List<Task> taskToOpp = new List<Task>();
    
    for (Opportunity o : [ SELECT Id,StageName FROM Opportunity WHERE StageName = 'Closed Won' AND Id IN :Trigger.New ]) {
        taskToOpp.add(new Task( Subject = 'Follow Up Test Task', WhatId = o.Id));
    }
    
    if (taskToOpp.size() > 0)
    insert taskToOpp;
 
}
 
